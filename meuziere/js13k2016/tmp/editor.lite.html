<p>Map <input id=w value=50 size=3 oninput=d.w=+value;init()>x<input id=h value=30 size=3 oninput=d.h=+value;init()> - <input id=o style=width:30vw> - <input type=checkbox id=E> Erase - <input type=checkbox id=z onchange=d.z=checked;init() checked> 1st tile - <a href=editor.lite.html>Reset</a> - <a href=# id=l>share</a> - <a href=# id=k>play</a><p><div style="border:1px solid;width:98vw;overflow:auto;position:relative"><canvas id=a width=2048 height=32></canvas><v style="border:3px solid red;position:absolute;top:0;left:0"id=p></div><p><div id=D style="border:1px solid;width:98vw;height:70vh;overflow:auto;position:relative"><canvas id=A oncontextmenu=return!1 onmouseup=m=0 onmousedown=m=event.which;A.onmousemove(event)></div><script src=l.js></script><script>c=a.getContext`2d`;C=A.getContext`2d`;onload=b=>init(1);init=b=>{o.value||(o.value=decodeURI(location.hash).slice(1));load_level(o.value);b&&o.value?w.value=d.w:d.w=+w.value;b&&o.value?h.value=d.h:d.h=+h.value;b&&o.value?z.checked=!!d.z:d.z=+z.checked;d.m=d.m||[];d.M=d.M||"";write_map();a.height=d.t;s=document.createElement("script");s.src="t.js";s.onload=s.onerror=b=>{I=new Image;I.src="t.png";I.onload=I.onerror=b=>{c.drawImage(I,0,0);p.style.width=p.style.height=d.t-5;A.width=d.t*d.w;A.height=d.t*d.h;if(d.z)for(i=0;i<d.w;i++)for(j=0;j<d.h;j++)C.drawImage(a,0,0,d.t,d.t,i*d.t,j*d.t,d.t,d.t);for(i in d.m)C.drawImage(a,d.m[i][2]*d.t,0,d.t,d.t,d.m[i][0]*d.t,d.m[i][1]*d.t,d.t,d.t);c.fillStyle=C.fillStyle="#888";for(i=0;5E5>i;i+=d.t)c.fillRect(i,0,1,5E5),C.fillRect(i,0,1,5E5);for(i=0;5E5>i;i+=d.t)c.fillRect(0,i,5E5,1),C.fillRect(0,i,5E5,1)}};document.body.appendChild(s)};a.onclick=b=>{T=~~((b.pageX-a.getBoundingClientRect().left)/d.t);p.style.left=T*d.t+"px"};A.onmousemove=b=>{R=A.getBoundingClientRect();X=~~((b.pageX-R.left)/d.t);Y=~~((b.pageY-R.top)/d.t);if(m)for(i in d.z?C.drawImage(a,0,0,d.t,d.t,X*d.t,Y*d.t,d.t,d.t):C.clearRect(X*d.t+1,Y*d.t+1,d.t-1,d.t-1),d.m)d.m[i][0]==X&&d.m[i][1]==Y&&delete d.m[i];1!=m||E.checked||0==T&&d.z||(C.drawImage(a,T*d.t,0,d.t,d.t,X*d.t,Y*d.t,d.t,d.t),d.m.push([X,Y,T]));m&&write_map()};write_map=b=>{o.value=String.fromCodePoint(d.t+32)+String.fromCodePoint(d.w+32)+String.fromCodePoint(d.h+32)+d.z;for(i in d.m)o.value+=String.fromCodePoint(d.m[i][0]+32)+String.fromCodePoint(d.m[i][1]+32)+String.fromCodePoint(d.m[i][2]+32);l.href="#"+encodeURI(o.value);k.href="index.html#"+encodeURI(o.value)};T=m=0;d={t:32}</script>