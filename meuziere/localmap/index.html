<!DOCTYPE html>
<meta charset='utf-8'/>
<title>Local + Maps </title>
<script src='mapbox-gl.js'></script>
<link href='mapbox-gl.css' rel='stylesheet'>
<script src='direction.js'></script>
<link href='direction.css' rel='stylesheet'>
<link href='https://www.qwant.com/maps/statics/css/app.css' rel='stylesheet'>
<link href='https://www.qwant.com/maps/mapstyle/iconfont/iconfont.css' rel='stylesheet'>

<style>
* {
  margin: 0;
  padding: 0;
  font-family: arial;
  font-size: 12px;
}

#map {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 100%;
}

.marker {
  background-image: url('mapbox-icon.png');
  background-size: cover;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  cursor: pointer;
  margin: -15px 0 0;
}
</style>

<body>
  <div id='map'></div>
  
  <div id=itinerary_container></div>
  
  <script>
  
  onload = function(){
  
    // Mapbox's map
    // ============
    
    // Mapbox demo token
    mapboxgl.accessToken = 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4M29iazA2Z2gycXA4N2pmbDZmangifQ.-g_vE53SD2WrJ6tFX7QHmA';
      
    // New Map
    const map = new mapboxgl.Map({
      container: 'map',
      style: 'built-style.json',
      center: [-0.5, 46.7],
      zoom: 5,
      language: "fr",
      unit: 'metric'
    });
    
    // Hide PoI
    map.on('load', () => {
      const layersToRemove = ['poi-level-1', 'poi-level-2', 'poi-level-3']
      layersToRemove.forEach((layer) => {
        map.setLayoutProperty(layer, 'visibility', 'none')
      })
    })
    
    // i18n
    _ = function(string){
      return string;
    }
    
    // Start itinerary plugin
    direction.ui(itinerary_container, map, "fr");
    
    // Close plugin
    direction.close_ui = function(){
      // TODO in erdapfel: hide plugin container, show main search input
    }
    
    
  
  }
  
  </script>

</body>